<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Web Osu!</title>
  <link rel="stylesheet" href="./style.css">

</head>
<body>

<body id="body">
  <div id="music"><audio src="./wysi.mp3" controls></audio></div>
  <div id="frame">

    <div id="masterButton">
      <div id="osuButton"><button type="button" id="osuButton1" data-value="1"><div id="buttonText">W</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton2" data-value="2"><div id="buttonText">Y</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton3" data-value="3"><div id="buttonText">S</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton4" data-value="4"><div id="buttonText">I</div></button></div>
    </div>
    
    <div id="masterButton2">
      <div id="osuButton"><button type="button" id="osuButton1" data-value="5"><div id="buttonText">W</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton2" data-value="6"><div id="buttonText">Y</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton3" data-value="7"><div id="buttonText">F</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton4" data-value="8"><div id="buttonText">S</div></button></div>
      <div id="osuButton"><button type="button" id="osuButton5" data-value="9"><div id="buttonText">I</div></button></div>
    </div>

    <div id="osuSlider">
      <div id="sliderConnecter">
        <button type="button" id="sliderConnecter1" data-value="0" disabled></button>
      </div>
      <button type="button" id="osuSliderPart1" data-value="0" disabled></button>
      <div id="osuSliderPart2"></div>
      <div id="sliderBeat1"></div>
      <button type="button" id="osuSliderPart3" data-value="0">
        <div id="buttonText">
          7
        </div>
      </button>
    </div>

    <div id="osuSlider2">
      <div id="sliderConnecter">
        <button type="button" id="sliderConnecter1" data-value="0" disabled></button>
      </div>
      <button type="button" id="osuSliderPart1" data-value="0" disabled></button>
      <button type="button" id="osuSliderPart2" data-value="0">
        <div id="buttonText">
          2
        </div>
      </button>
      <div id="sliderBeat1"></div>
      <button type="button" id="osuSliderPart3" data-value="0" disabled></button>
    </div>

    <div id="osuSlider3">
      <div id="sliderConnecter">
        <button type="button" id="sliderConnecter1" data-value="0" disabled></button>
      </div>
      <button type="button" id="osuSliderPart1" data-value="0" disabled></button>
      <div id="osuSliderPart2"></div>
      <div id="sliderBeat1"></div>
      <button type="button" id="osuSliderPart3" data-value="0">
        <div id="buttonText">
          7
        </div>
      </button>
    </div>
  
  <div class="light">
    <div class="lightbox">
    </div>
  </div>
  
</body>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
  <script type="module">
    var combos = [];

    function wysi() {
      if (combos.length === 8) {
        var cs = combos.join("");
        var csr = cs + cs.split("").reverse().join("");
        var res = CryptoJS.AES.decrypt("5LJJj+x+/cGxhxBTdj/Q2RxkhgbH7v8b/IgX9Kjptpo=", CryptoJS.enc.Hex.parse(csr + csr), { mode: CryptoJS.mode.ECB }).toString(CryptoJS.enc.Utf8);
        // if prefix is "osu{" then its correct
        if (res.startsWith("osu{")) {
          document.getElementById("music").innerHTML = '<audio src="./wysi.mp3" autoplay></audio>';
          console.log(res);
        } else {
          // reset
          console.log("nope.");
          combos = [];
        }
      }
    }

    $(document).ready(function() {
      $("#frame").on("click", "button", function() {
        var buttonValue = $(this).data("value");
        combos.push(buttonValue);
        wysi();
      });
    });
  </script>
</body>
</html>
